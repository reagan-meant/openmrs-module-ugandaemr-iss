<htmlform formName="Intake Form"
          formDescription="Summary entry form for patients enrolled for ART"
          formEncounterType="8d5b27bc-c2cc-11de-8d13-0010c6dffd0f"
          formUuid="52653a60-8300-4c13-be4d-4b746da06fee"
          formVersion="2.1"
          formAddMetadata="yes"
          formUILocation="patientDashboard.visitActions"
          formOrder="1"
          formIcon="icon-medkit"
          formShowIf="(visit.active || !visit.active) &amp;&amp; patient.person.dead==false &amp;&amp; sessionLocation.uuid=='86863db4-6101-4ecf-9a86-5e716d6504e4'"
          formDisplayStyle="Standard"
          formLabel="Intake Form">
    <!-- TODO: Fix the url of all the forms to display their contents once done -->
    <redirectOnSave
            url="/coreapps/patientdashboard/patientDashboard.page?patientId={{patient.id}}&amp;encounterId={{encounter.id}}#visits"/>
    <script type="text/javascript">

        function enable_disable_fm(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;
            var disable1 = true;

            var row_1 = '[class^="FamilyMember"][class*="Children1"]';
            var row_2 = '[class^="FamilyMember"][class*="Children2"]';
            var row_3 = '[class^="FamilyMember"][class*="Children3"]';
            var row_4 = '[class^="FamilyMember"][class*="Children4"]';
            var row_5 = '[class^="FamilyMember"][class*="Children5"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find(":selected").text();


            if (selected_value == "P") {
                disable = false;
            }
            else if (selected_value == "Y") {
                disable1 = false;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;
                case 5:
                    xx = row_5;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Children') == -1) {
                    /* group.find('select').prop("selectedIndex", 0);*/
                    group.find('select').attr("disabled", disable);
                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("select").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("select").fadeTo(250, 1);
                    }
                }
                if (class_name.indexOf('GrandChildren') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable1);

                    if (disable1) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }

            });

        }function enable_disable(field, class_name_prefix, conditions, input_type) {

            var class_name = jq(field).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));
            var childClass = "Child" + class_id;

            var disable = true;
            var requires = true;

            var row = '[class^="' + class_name_prefix + '"][class*="' + childClass + '"]';

            var selected_value = null;

            if (input_type == "select") {
                selected_value = jq(field).find(":selected").text().trim().toLowerCase();
            }
            else if (input_type == "hidden") {
                selected_value = jq(field).find("input[type=hidden]").val().trim().toLowerCase();
            }


            if (eval(conditions)) {
                disable = false;
            }


            jq(row).each(function () {
                var group = jq(this);

                if (class_name.indexOf('Child') == -1) {
                    /*group.find("input").attr("value", ""); */
                    group.find("input").attr("required", requires);
                    /* group.find('select').prop("selectedIndex", 0);*/
                    group.find("input").attr("disabled", disable);
                    group.find('select').attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled */
                        group.find("input").fadeTo(250, 0.25);
                        group.find("select").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields */
                        group.find("input").fadeTo(250, 1);
                        group.find("select").fadeTo(250, 1);
                    }
                }
            });
        }

        function enable_disable_ei_final_status(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;

            var row_1 = '[class^="ExposedInfantFinalStatus"][class*="Children1"]';
            var row_2 = '[class^="ExposedInfantFinalStatus"][class*="Children2"]';
            var row_3 = '[class^="ExposedInfantFinalStatus"][class*="Children3"]';
            var row_4 = '[class^="ExposedInfantFinalStatus"][class*="Children4"]';
            var row_5 = '[class^="ExposedInfantFinalStatus"][class*="Children5"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find(":selected").text();

            if (selected_value.toLowerCase() == "p") {
                disable = false;
            }
            else {
                disable = true;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;
                case 5:
                    xx = row_5;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Children') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }

            });

        }

        function enable_disable_ei_pcr_result(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;

            var row_1 = '[class^="ExposedInfantPCRResult"][class*="Children1"]';
            var row_2 = '[class^="ExposedInfantPCRResult"][class*="Children2"]';
            var row_3 = '[class^="ExposedInfantPCRResult"][class*="Children3"]';
            var row_4 = '[class^="ExposedInfantPCRResult"][class*="Children4"]';
            var row_5 = '[class^="ExposedInfantPCRResult"][class*="Children5"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find("input").val();

            if (selected_value != "") {
                disable = false;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;
                case 5:
                    xx = row_5;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Children') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable);
                    group.find("select").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                        group.find("select").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                        group.find("select").fadeTo(250, 0.25);
                    }

                }
            });
        }


        function enable_disable_ac(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;

            var row_1 = '[class^="ArtCare"][class*="Child1"]';
            var row_2 = '[class^="ArtCare"][class*="Child2"]';
            var row_3 = '[class^="ArtCare"][class*="Child3"]';
            var row_4 = '[class^="ArtCare"][class*="Child4"]';
            var row_5 = '[class^="ArtCare"][class*="Child5"]';
            var row_6 = '[class^="ArtCare"][class*="Child6"]';
            var row_7 = '[class^="ArtCare"][class*="Child7"]';
            var row_8 = '[class^="ArtCare"][class*="Child8"]';
            var row_9 = '[class^="ArtCare"][class*="Child9"]';
            var row_10 = '[class^="ArtCare"][class*="Child10"]';
            var row_11 = '[class^="ArtCare"][class*="Child11"]';
            var row_12 = '[class^="ArtCare"][class*="Child12"]';
            var row_13 = '[class^="ArtCare"][class*="Child13"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find(":selected").text();

            selected_value = selected_value.trim().toLowerCase();

            if (selected_value == "other" || selected_value == "other specify") {
                disable = false;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;
                case 5:
                    xx = row_5;
                    break;
                case 6:
                    xx = row_6;
                    break;
                case 7:
                    xx = row_7;
                    break;
                case 8:
                    xx = row_8;
                    break;
                case 9:
                    xx = row_9;
                    break;
                case 10:
                    xx = row_10;
                    break;
                case 11:
                    xx = row_11;
                    break;
                case 12:
                    xx = row_12;
                    break;
                case 13:
                    xx = row_13;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Child') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }
            });
        }


        function enable_disable_art_start(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;

            var row_1 = '[class^="ARTStart"][class*="Child1"]';
            var row_2 = '[class^="ARTStart"][class*="Child2"]';
            var row_3 = '[class^="ARTStart"][class*="Child3"]';
            var row_4 = '[class^="ARTStart"][class*="Child4"]';
            var row_5 = '[class^="ARTStart"][class*="Child5"]';
            var row_6 = '[class^="ARTStart"][class*="Child6"]';
            var row_7 = '[class^="ARTStart"][class*="Child7"]';
            var row_8 = '[class^="ARTStart"][class*="Child8"]';
            var row_9 = '[class^="ARTStart"][class*="Child9"]';
            var row_10 = '[class^="ARTStart"][class*="Child10"]';
            var row_11 = '[class^="ARTStart"][class*="Child11"]';
            var row_12 = '[class^="ARTStart"][class*="Child12"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find("input[type=hidden]").val();

            if (selected_value != "") {
                disable = false;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;
                case 5:
                    xx = row_5;
                    break;
                case 6:
                    xx = row_6;
                    break;
                case 7:
                    xx = row_7;
                    break;
                case 8:
                    xx = row_8;
                    break;
                case 9:
                    xx = row_9;
                    break;
                case 10:
                    xx = row_10;
                    break;
                case 11:
                    xx = row_11;
                    break;
                case 12:
                    xx = row_12;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Child') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable);
                    group.find("select").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }
            });
        }


        function enable_disable_art_start3(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;

            var row_1 = '[class^="ARTStart3"][class*="Child1"]';
            var row_2 = '[class^="ARTStart3"][class*="Child2"]';
            var row_3 = '[class^="ARTStart3"][class*="Child3"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find("input[type=hidden]").val();

            if (selected_value != "") {
                disable = false;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Child') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable);
                    group.find("select").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }
            });
        }


        function enable_disable_hiv_care(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;

            var row_1 = '[class^="HIVCare"][class*="Child1"]';
            var row_2 = '[class^="HIVCare"][class*="Child2"]';
            var row_3 = '[class^="HIVCare"][class*="Child3"]';
            var row_4 = '[class^="HIVCare"][class*="Child4"]';
            var row_5 = '[class^="HIVCare"][class*="Child5"]';
            var row_6 = '[class^="HIVCare"][class*="Child6"]';
            var row_7 = '[class^="HIVCare"][class*="Child7"]';
            var row_8 = '[class^="HIVCare"][class*="Child8"]';
            var row_9 = '[class^="HIVCare"][class*="Child9"]';
            var row_10 = '[class^="HIVCare"][class*="Child10"]';
            var row_11 = '[class^="HIVCare"][class*="Child11"]';
            var row_12 = '[class^="HIVCare"][class*="Child12"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find("input").val();

            selected_value = selected_value.trim().toLowerCase();

            if (selected_value != "") {
                disable = false;
            }

            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;
                case 5:
                    xx = row_5;
                    break;
                case 6:
                    xx = row_6;
                    break;
                case 7:
                    xx = row_7;
                    break;
                case 8:
                    xx = row_8;
                    break;
                case 9:
                    xx = row_9;
                    break;
                case 10:
                    xx = row_10;
                    break;
                case 11:
                    xx = row_11;
                    break;
                case 12:
                    xx = row_12;
                    break;
            }


            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Child') == -1) {
                    /* group.find("input").attr("value", "");*/
                    group.find("input").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }
            });
        }


        function enable_disable_ati(selected_option) {

            var class_name = jq(selected_option).attr("class");

            var length = class_name.length;

            var class_id = parseInt(class_name.substring(length - 1, length));

            var row_id = class_id;

            var disable = true;
            var disable2 = true;

            var row_1 = '[class^="ARTTreatmentInterruption"][class*="Child1"]';
            var row_2 = '[class^="ARTTreatmentInterruption"][class*="Child2"]';
            var row_3 = '[class^="ARTTreatmentInterruption"][class*="Child3"]';
            var row_4 = '[class^="ARTTreatmentInterruption"][class*="Child4"]';
            var row_5 = '[class^="ARTTreatmentInterruption"][class*="Child5"]';
            var row_6 = '[class^="ARTTreatmentInterruption"][class*="Child6"]';

            var xx = row_1;
            var selected_value = jq(selected_option).find(":selected").text();

            var selected_value2 = jq(selected_option).find("input[type=hidden]").val();

            selected_value = selected_value.trim().toLowerCase();

            if (selected_value == "stopped" || selected_value == "lost") {
                disable = false;
            }

            if (selected_value == "stopped") {
                disable2 = false;
            }

            if (selected_value == "" &amp;&amp; selected_value2 != "") {
                disable2 = false;
            }


            switch (row_id) {
                case 1:
                    xx = row_1;
                    break;
                case 2:
                    xx = row_2;
                    break;
                case 3:
                    xx = row_3;
                    break;
                case 4:
                    xx = row_4;
                    break;

                case 5:
                    xx = row_5;
                    break;
                case 6:
                    xx = row_6;
                    break;

            }

            jq(xx).each(function () {
                var group = jq(this);
                if (class_name.indexOf('Child') == -1) {
                    group.find("input").attr("disabled", disable);

                    if (disable) {
                        /* fade out the fields that are disabled*/
                        group.find("input").fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find("input").fadeTo(250, 1);
                    }
                }
                if (class_name.indexOf('GrandChild') == -1) {
                    /* group.find("input").attr("value", "");*/
                    /* group.find('select').prop("selectedIndex", 0);*/
                    group.find('select').attr("disabled", disable2);

                    if (disable2) {
                        /* fade out the fields that are disabled*/
                        group.find('select').fadeTo(250, 0.25);
                    } else {
                        /* remove the fade on the fields*/
                        group.find('select').fadeTo(250, 1);
                    }
                }
            });
        }

        if (jQuery) {
            jq(document).ready(function () {
                /* add JQuery validator classes and rules*/
                jq("#90278 input").addClass("ugphone");

                /* add the validator on the beforeSubmit*/
                beforeSubmit.push(function () {
                            jq("#htmlform").validate();
                            return jq("#htmlform").valid();
                        }
                );

                var gender = jq("span.gender").html();
                var age = jq("span.age").html();

                jq('[class^="FamilyMemberEnableDisable"]').change(function () {
                    enable_disable_fm(jq(this));
                });

                jq('[class^="FamilyMemberEnableDisable"]').each(function () {
                    enable_disable_fm(jq(this));
                });


                jq('[class^="ExposedInfantFinalStatusEnableDisable"]').change(function () {
                    enable_disable_ei_final_status(jq(this));
                });

                jq('[class^="ExposedInfantFinalStatusEnableDisable"]').each(function () {
                    enable_disable_ei_final_status(jq(this));
                });

                jq('[class^="ExposedInfantPCRResultEnableDisable"]').change(function () {
                    enable_disable_ei_pcr_result(jq(this));
                });

                jq('[class^="ExposedInfantPCRResultEnableDisable"]').each(function () {
                    enable_disable_ei_pcr_result(jq(this));
                });


                jq('[class^="ArtCareEnableDisable"]').change(function () {
                    enable_disable_ac(jq(this));
                });


                jq('[class^="ArtCareEnableDisable"]').each(function () {
                    enable_disable_ac(jq(this))
                });

                jq('[class^="HIVCareEnableDisable"]').change(function () {
                    enable_disable_hiv_care(jq(this));
                });

                jq('[class^="ARTCareEntryPointEnableDisable"]').change(function () {
                    enable_disable(jq(this), "ARTCareEntryPoint", 'selected_value == "other"', "select");
                });

                jq('[class^="ARTCareEntryPointEnableDisable"]').each(function () {
                    enable_disable(jq(this), "ARTCareEntryPoint", 'selected_value == "other"', "select");
                });

                jq('[class^="HIVCareEnableDisable"]').each(function () {
                    enable_disable_hiv_care(jq(this))
                });

                jq('[class^="ARTStartEnableDisable"]').change(function () {
                    enable_disable_art_start(jq(this));
                });


                jq('[class^="ARTStartEnableDisable"]').each(function () {
                    enable_disable_art_start(jq(this))
                });


                jq('[class^="ARTStart3EnableDisable"]').change(function () {
                    enable_disable_art_start3(jq(this));
                });


                jq('[class^="ARTStart3EnableDisable"]').each(function () {
                    enable_disable_art_start3(jq(this))
                });


                jq('[class^="ARTTreatmentInterruptionEnableDisable"]').change(function () {
                    enable_disable_ati(jq(this));
                });


                jq('[class^="ARTTreatmentInterruptionEnableDisable"]').each(function () {
                    enable_disable_ati(jq(this))
                });

                jq('[class^="PriorYesNoEnableDisable"]').change(function () {
                    enable_disable(jq(this), "PriorYesNo", 'selected_value == "yes"', "select");
                });

                jq('[class^="PriorYesNoEnableDisable"]').each(function () {
                    enable_disable(jq(this), "PriorYesNo", 'selected_value == "yes"', "select");
                });

                jq(".enableDisable").each(function () {
                    var group = jq(this);

                    function disableFn() {
                        group.children("#disabled").fadeTo(250, 0.25);
                        /*  group.children("#disabled").find(":checkbox").attr("checked", false); //uncheck*/
                        group.children("#disabled").find("input").attr("disabled", true);
                        /*disable*/
                        group.children("#disabled").find("select").attr("disabled", true);
                    }

                    function enableFn() {
                        group.children("#disabled").fadeTo(250, 1);
                        group.children("#disabled").find("input").attr("disabled", false);
                        group.children("#disabled").find("select").attr("disabled", false);

                    }

                    if (jq(this).children("#trigger").find(":checkbox:first").attr("checked") != "checked") {
                        disableFn();
                    }

                    jq(this).children("#trigger").find(":checkbox:first").change(function () {
                        var checked = jq(this).attr("checked");
                        if (checked == "checked") {
                            enableFn();
                        } else {
                            disableFn();
                        }
                    });
                });


                jq(".checkboxGroup").each(function () {
                    var group = jq(this);
                    var uncheckAll = function () {
                        group.find("input[type$='checkbox']").attr("checked", false);
                        group.find("input[type$='checkbox']").change();
                    }

                    var uncheckRadioAndAll = function () {
                        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked", false);
                        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
                    }


                    group.find("#checkboxAll").find("input").click(
                            function () {
                                var flip;
                                var checked = jq(this).siblings(":checkbox:first").attr("checked");
                                if (jq(this).attr("name") == jq(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")) {
                                    checked = jq(this).attr("checked");
                                    flip = checked;
                                } else {
                                    flip = !checked;
                                }
                                if (jq.attr("type") == "text") if (flip == false) flip = !filp;
                                /* this is so the user doesn't go to check thecheckbox, then uncheck it when they hit the input.uncheckAll();*/
                                jq(this).parents("#checkboxAll:first").find(":checkbox").attr("checked", flip);
                                jq(this).parents("#checkboxAll:first").find(":checkbox").change();
                            }
                    );


                    group.find("#checkboxRadio").find("input[type$='checkbox']").click(function () {
                        uncheckAll();
                        jq(this).siblings("input[type$='checkbox']").attr("checked", false);
                        jq(this).attr("checked", true);
                        jq(this).change();
                    });

                    group.find("#checkboxCheckbox").click(
                            function () {
                                uncheckRadioAndAll();
                            }
                    );
                });
            });

        }
    </script>

    <script type="text/javascript">
        function val() {
            document.getElementById("fgh").disabled = "true";
        }
    </script>
    <script>
               jQuery( document ).ready(function() {

var clinicNo = jQuery("#w5");
               
 jQuery("#w5").attr("data-mask","MLG-__-_____");


Array.prototype.forEach.call(document.body.querySelectorAll("*[data-mask]"), applyDataMask);

function applyDataMask(field) {
    var mask = field.dataset.mask.split('');
    
    // For now, this just strips everything that's not a number
    function stripMask(maskedData) {
        function isDigit(char) {
            return /\d/.test(char);
        }
        return maskedData.split('').filter(isDigit);
    }
    
    // Replace `_` characters with characters from `data`
    function applyMask(data) {
        return mask.map(function(char) {
            if (char != '_') return char;
            if (data.length == 0) return char;
            return data.shift();
        }).join('')
    }
    
    function reapplyMask(data) {
        return applyMask(stripMask(data));
    }
    
    function changed() {   
        var oldStart = field.selectionStart;
        var oldEnd = field.selectionEnd;
        
        field.value = reapplyMask(field.value);
        
        field.selectionStart = oldStart;
        field.selectionEnd = oldEnd;
    }

    function resetCursor() {
        var len = this.value.length;
        this.setSelectionRange(len, len);
    }
    
    field.addEventListener('click', changed)
    field.addEventListener('keyup', changed)
    field.addEventListener('focus', resetCursor, false)
    field.addEventListener('mouseup', resetCursor, false)
    field.addEventListener('keyup', resetCursor, false)
    field.addEventListener('keydown', resetCursor, false)
    
}

               });

    </script>

    <style type="text/css">
        .error {
            color: red;
        }

        table td {
            background: #B6D6E6;
            color: #404040;
        }

        form#htmlform div.ai-page-frame table tbody td {
            background: #B6D6E6;
            color: #404040;
            padding: 0px 5px;
        }

        form select, .form select {
            min-width: 0px;
        }

        form input, form select, form textarea, form ul.select, .form input, .form select, .form textarea, .form
        ul.select {
            background-color: #FBFBFB;
            border: 1px solid #404040;
            border-radius: 5px;
            margin-bottom: 10px;
            padding: 0px 0px 0px 5px;
            min-width: auto;
            display:inline-block;
        }

      input[type=radio] {
            display:inline-block;
            float:none !important;
       }

      form label {
            display:inline-block;
       }

        .row {
            width: 100%;
            float: left;
            display: inline-flex;
            clear: both;
        }

        .row .row-col2 {
            float: left;
            width: 50%;
        }

        table th, table td {
            border: 1px solid #BDBDBD;
            text-align: left;
            vertical-align: top;
        }
        .hasDatepicker {
           width: auto !important;
           min-width:auto !important;
        }

        .lablex2 span {
            min-width: 50%;
            float: left;
            margin: 1px 0px;
        }

    </style>

    <!-- Beging of HTML Form -->
    <div class="ai-page-frame">
        <div class="headers" style="text-align: center;">
            <h3>HIV Care/ART CARD - Summary Page</h3>
        </div>
        <section>
            <table class="enrollment">
                <tbody>
                                <tr>
                    <td>
                        <label>Clinic Number:</label>
                        <patient field="identifier" identifierTypeId="e1731641-30ab-102d-86b0-7a5022ba4115"
                                 required="true"/>
                    </td>
                    <td>
                        <label>Household Number:</label>
                        <patient field="identifier" identifierTypeId="25b18d88-be0d-4d92-b398-3a98954c6de0 "
                                 required="false"/>
                    </td>
                    <td>
                        <label>TB Number:</label>
                        <patient field="identifier" identifierTypeId="8110f2d2-1f98-4c38-aef3-11b19bb0a589"
                                 required="false"/>
                    </td>
                        <td>
                            <label>National ID:</label>
                            <patient field="identifier" identifierTypeId="f0c16a6d-dc5f-4118-a803-616d0075d282"
                                     required="false"/>
                        </td>
                </tr>
                <tr>
                    <td class="HIVCareEnableDisable1">
                       <label>Registration Date</label> 
                       <encounterDate default="today" disallowMultipleEncountersOnDate="block"/>
                    </td>
                   <td>
                       <label>Do you have any household member attending the clinic?</label>
                       <obs conceptId="1163140" answerConceptIds="90003, 90004" answerLabels="Yes, No" />
                   </td>
                    <td class="checkboxGroup" colspan="2">
                         <label>Patient Category:</label>
                         <span class="enableDisable">
                        <p>
                           <obs id="patientCategory" conceptId="1163205" answerConceptIds="163141,99110" answerLabels="New to HIV Care,Transfer In">
                              <controls>
                                 <when value = "99110" thenDisplay="#transferInSection" />
                              </controls>
                          </obs>
                        </p>
                        <p id="transferInSection">
                            <b>Transfer in from</b>
                            <obs conceptId="99109" labelText=""/>
                          <label>If from MJAP clinic Previous clinic#:</label>
                           <obs conceptId="1163142" />
                        </p>
                    </span>
                    </td>
                </tr>
<includeIf velocityTest="6 > $patient.getAge($encounter.getEncounterDatetime())">
                <tr>
                    <td colspan="2" id="documentedHIVResult">
                        <label>Documented HIV +ve Result?:</label>
                        <obs conceptId="1163143" answerConceptIds="90003,99087,90004" answerLabels="Yes,HIV Exposed,No" />
                    </td>
                    <td colspan="2" id="comfirmedDate">
                        <obs conceptId="90267" labelText="Date of HIV Test:"/>
                        <obs conceptId="99795" labelText="Last DNA PCR date:"/>
                    </td>
                </tr>
</includeIf>
 <includeIf velocityTest="$patient.getAge($encounter.getEncounterDatetime()) &gt;=6">
                <tr>
                    <td colspan="2" id="documentedHIVResult">
                        <label>Documented HIV +ve Result?:</label>
                        <obs conceptId="1163143" answerConceptIds="90003, 90004" answerLabels="Yes, No" />
                    </td>
                    <td colspan="2" id="comfirmedDate">
                        <obs conceptId="90267" labelText="Date of HIV Test:"/>
                    </td>

                </tr>
</includeIf>

<excludeIf velocityTest="$patient.age &lt; 9">
<tr>
<td>
 <label>Occupation:</label>
      <obs conceptId="1163144" answerConceptIds="1107,1163145, 1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
</td>

<td>
 <label>Income Per Month:</label>
<obs conceptId="1163151" answerConceptIds="1163152,1163153,1163154,1107" answerLabels="1 - Less than 50000,2 - 50000 - 100000, 3 - Above 100000, 4 - None"  />
</td>

<td>
 <label>Education Level:</label>
<obs conceptId="99516" answerConceptIds="1107,1163155,1163156,1163157" answerLabels="1 - None,2 - Primary, 3 - Secondary, 4 - Tertiary"  />
</td>

<td>
 <label>Religion:</label>
<obs id="religionSection" conceptId="1163158" answerConceptIds="1163159,1163160,5622" answerLabels="1 - Christian,2 - Muslim, 3 - Other,">
<controls>
  <when value="5622" thenDisplay="#religionOther" />
</controls>
</obs>
<span id="religionOther">
<obs conceptId="1163161" />
</span>
</td>
</tr>
</excludeIf>
 <includeIf velocityTest="$patient.getAge($encounter.getEncounterDatetime()) &gt;=10">
                <tr style="background: #F7F7F7;">
                    <obsgroup groupingConceptId="99116">
                        <td colspan="4" style="width: 33%;">
                            <label>Who Referred you to the clinic?</label>

                                <span class="ARTCareEntryPointEnableDisable1">
                                    <excludeIf velocityTest="$patient.gender =='M' ">
                                        <obs conceptId="90200"
                                             answerConceptIds="90012,90016,99593,90019,90013,90015,90018,163162,163163,163164,163165,90002"
                                             answerLabels="eMTCT,TB,YCC,Outreach,Out Patient,STI,Inpatient,Self-referral,RCT Mbarara,Health Center/Clinic,RCT Mulago,Other"
                                             required="true"/>
                                    </excludeIf>

                                    <excludeIf velocityTest="$patient.gender =='F' ">
                                        <obs conceptId="90200"
                                             answerConceptIds="90016,99593,99610,90019,90013,90015,90018,163162,163163,163164,163165,90002"
                                             answerLabels="TB,YCC,SMC,Outreach,Out Patient,STI,Inpatient,Self-referral,RCT Mbarara,Health Center/Clinic,RCT Mulago,Other"
                                             required="true"/>
                                    </excludeIf>
                                </span>
                            <span class="ARTCareEntryPointEnableDisableChild1">
                                <obs conceptId="99115" labelText="Other"/>
                            </span>
                        </td>
                    </obsgroup>
                </tr>
</includeIf>
<includeIf velocityTest="10 > $patient.getAge($encounter.getEncounterDatetime())">
                <tr style="background: #F7F7F7;">
                    <obsgroup groupingConceptId="99116">
                        <td colspan="2" style="width: 33%;">
                            <label>Who Referred you to the clinic?</label>

                                <span class="ARTCareEntryPointEnableDisable1">
                                    <excludeIf velocityTest="$patient.gender =='M' ">
                                        <obs conceptId="90200"
                                             answerConceptIds="90012,90016,99593,90019,90013,90015,90018,163162,163163,163164,163165,90002"
                                             answerLabels="eMTCT,TB,YCC,Outreach,Out Patient,STI,Inpatient,Self-referral,RCT Mbarara,Health Center/Clinic,RCT Mulago,Other"
                                             required="true"/>
                                    </excludeIf>

                                    <excludeIf velocityTest="$patient.gender =='F' ">
                                        <obs conceptId="90200"
                                             answerConceptIds="90016,99593,99610,90019,90013,90015,90018,163162,163163,163164,163165,90002"
                                             answerLabels="TB,YCC,SMC,Outreach,Out Patient,STI,Inpatient,Self-referral,RCT Mbarara,Health Center/Clinic,RCT Mulago,Other"
                                             required="true"/>
                                    </excludeIf>
                                </span>
                            <span class="ARTCareEntryPointEnableDisableChild1">
                                <obs conceptId="99115" labelText="Other"/>
                            </span>
                        </td>
                        <td colspan="2" style="width: 33%;">
      <obs conceptId="5629" answerConceptIds="90003,90004" answerLabels="Yes,No" labelText="Is Child attending School?:"/>
                        </td>
                    </obsgroup>
                </tr>
</includeIf>
<tr>
                    <td colspan="4">
                      <label>Directions to client's/Child's Home<i>(specifiy clearly the land marks e.g. school, transformers e.t.c)</i></label>
                      <obs conceptId="1163166" rows="2" cols="80"/>
                   </td>
</tr>
                </tbody>
            </table>
        </section>

        <section>
           <includeIf velocityTest="14 > $patient.getAge($encounter.getEncounterDatetime())"><h3>Care Taker</h3></includeIf>
           <includeIf velocityTest="$patient.getAge($encounter.getEncounterDatetime()) > 13"><h3>Treatment Supporter</h3></includeIf>

            <table>
                <tbody>
                <tr>
                    <td>
                        <obs conceptId="99142" labelText="Name"/>
                    </td>
<td>

<obs id="supporterSection" conceptId="99120" answerConceptIds="90280,90288,90286,90279,90284,5618,90002" labelText="Relationship">
<controls>
  <when value="90002" thenDisplay="#relationshipOther" />
</controls>
</obs>
<span id="relationshipOther">
<obs conceptId="1163308" />
</span>
                    </td>
                    <td>
                        <obs conceptId="90278" labelText="Telephone" class="ugphone" id="90278"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <obs conceptId="99142" labelText="Name"/>
                    </td>
                     <td>
<obs id="supporterSection1" conceptId="99120" answerConceptIds="90280,90288,90286,90279,90284,5618,90002" labelText="Relationship">
<controls>
  <when value="90002" thenDisplay="#relationshipOther1" />
</controls>
</obs>
<span id="relationshipOther1">
<obs conceptId="1163308" />
</span>
                    </td>
                    <td>
                        <obs conceptId="90278" labelText="Telephone" class="ugphone" id="90278"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>

        <includeIf velocityTest="14 > $patient.getAge($encounter.getEncounterDatetime())">
<section>
            <h3>Child Essentials</h3>
            <table>
                <tbody>
                <tr>
                    <td>
                        <obs conceptId="5303" style="radio" answerConceptIds="822,1169" answerLabels="HIV exposed,HIV infected" labelText="Childs Status:" />
                    </td>
                    <td>
                        <obs conceptId="5916" labelText="Childs Birth Weight if Known:" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <obs conceptId="162872" labelText="Did the mother receive any ARVs ante/intra and or postpartum(PMTCT)?" style="radio" answerConceptIds="90003,90004" answerLabels="Yes,No"/>
                    </td>
                    <td>
                        <obs id="breastFeedingSection" conceptId="5632" labelText="Is the Child currently being breastfed?" answerConceptIds="90003,90004" answerLabels="Yes,No">
                        <controls>
                           <when value="90003" thenDisplay="#mixedFeedingSection" />
                        </controls>
                        </obs>
                       <br/>
                        <span id="mixedFeedingSection">
                        <obs conceptId="6046" labelText="If yes, is the child receiving any other foods/liquids other than breast milk(including water)?" style="radio" answerConceptIds="90003,90004" answerLabels="Yes,No"/>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <obs conceptId="1163206" labelText="Does the child meet age appropriate development milestones?" style="radio" answerConceptIds="90003,90004" answerLabels="Yes,No"/>
                    </td>
                </tr>
        <includeIf velocityTest="$patient.getAge($encounter.getEncounterDatetime()) > 8">
                <excludeIf velocityTest="$patient.gender =='M' ">
                <tr>
                    <td>
                        <obs conceptId="99325" labelText="If female, (adolescent), last normal menstrual period" />
                    </td>
                    <td>
                        <obs conceptId="90041" labelText="Pregnant:" style="radio" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                    </td>
                </tr>
               </excludeIf>
        </includeIf>
                </tbody>
            </table>
        </section>
</includeIf>
<!-- start of immunization history -->
        <includeIf velocityTest="15 > $patient.getAge($encounter.getEncounterDatetime())">
<section>
            <h3>Immunizations received</h3>
            <table>
                <tbody>
                <tr>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Vaccine</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 15%;">
                        <b>Total number of doses</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Vaccine</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 15%;">
                        <b>Total number of doses</b>
                    </td>
                </tr>
                <tr>
                    <td >
                        <obs conceptId="1198" answerConceptId="886" answerLabel="BCG" />
                    </td>
                    <td >
                        <obs conceptId="1163207"/>
                    </td>
                    <td >
                        <obs conceptId="1198" answerConceptId="5261" answerLabel="HIb" />
                    </td>
                    <td >
                        <obs conceptId="1163208"/>
                    </td>
                </tr>
                <tr>
                    <td >
                        <obs conceptId="1198" answerConceptId="783" answerLabel="OPV" />
                    </td>
                    <td >
                        <obs conceptId="1163209"/>
                    </td>
                    <td >
                        <obs conceptId="1198" answerConceptId="36" answerLabel="MEASELS" />
                    </td>
                    <td >
                        <obs conceptId="1163210"/>
                    </td>
                </tr>
                <tr>
                    <td >
                        <obs conceptId="1198" answerConceptId="781" answerLabel="DPT" />
                    </td>
                    <td >
                        <obs conceptId="1163211"/>
                    </td>
                    <td >
                        <obs conceptId="1198" answerConceptId="5622" answerLabel="Other 1" />
                    </td>
                    <td >
                        <obs conceptId="1163213"/>
                    </td>
                </tr>
                <tr>
                    <td >
                        <obs conceptId="1198" answerConceptId="782" answerLabel="HEPB" />
                    </td>
                    <td >
                        <obs conceptId="1163212"/>
                    </td>
                    <td >
                        <obs conceptId="1198" answerConceptId="5622" answerLabel="Other 2" />
                    </td>
                    <td >
                        <obs conceptId="1163213"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>
</includeIf>
<!-- end of Immunization history -->
        <section>
            <h3>Family members and Partners</h3>
            <table border="0" style="background-color: #EEE; width:100%;">
                <tbody style="overflow-y: scroll; height:400px; display:block;">
                <tr>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Name of family members and Partners</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 15%;">
                        <b>R/ship to head</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Sex</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Age</b>
                        <br/>
                        (if &lt;=2yrs, write in mths)
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Education</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Occupation</b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        HIV
                        <b> U/N/P
                        </b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        HIV
                        Care<b> Y/N
                    </b>
                    </td>
                    <td style="color: #404040; padding: 15px;width: 20%;">
                        <b>Unique
                            No</b>
                    </td>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="163167,90288,163168,163169,90279,163170,163171,90285,163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145, 1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="1163167,90288,1163168,1163169,90279,1163170,1163171,90285,1163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,163145, 163146,163147,163148,163149,163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="163167,90288,163168,163169,90279,163170,163171,90285,163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145, 1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="1163167,90288,1163168,1163169,90279,1163170,1163171,90285,1163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145,1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="1163167,90288,1163168,1163169,90279,1163170,1163171,90285,1163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145, 1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="1163167,90288,1163168,1163169,90279,1163170,1163171,90285,1163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145,1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="1163167,90288,1163168,1163169,90279,1163170,1163171,90285,1163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145, 1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99075">
                        <td>
                            <obs conceptId="99073" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90269"  answerConceptIds="1163167,90288,1163168,1163169,90279,1163170,1163171,90285,1163172,5622" answerLabels="0-HH Head,1-Spouse,2-Biological Child,3-Other Child,4-Parent,5-Inlaw,6-Co-wife,7-Sibling,8-Other Relative,99-Other"/>
                        </td>
                        <td>
                            <obs conceptId="90252" answerConceptIds="90165,90164" answerLabels="M,F"/>
                        </td>
                        <td>
                            <obs conceptId="99074"/>
                            <obs conceptId="99725" answerConceptIds="1074,99726"
                                 answerLabels="Yrs,Mths"/>
                        </td>
                        <td>
                            <obs conceptId="99516"/>
                        </td>
                        <td>
<obs conceptId="1163144" answerConceptIds="1107,1163145,1163146,1163147,1163148,1163149,1163150,5622" answerLabels="1-None,2-Paid,3-Peasant,4-Casual,5-Housewife,6-Vender,7-Student,8-Other"/>
                        </td>

                        <td class="FamilyMemberEnableDisable1">
                            <obs conceptId="90253" answerConceptIds="90001,90167,90166"
                                 answerLabels="U,N,P"/>
                        </td>
                        <td class="FamilyMemberEnableDisableChildren1">
                            <obs conceptId="90270" answerConceptIds="90003,90004"
                                 answerLabels="Y,N" onchange="return val()"/>
                        </td>
                        <td class="FamilyMemberEnableDisableGrandChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
                </tbody>
            </table>
        </section>
 <section>
                    <section>

                        <table>
                            <tbody>
                            <tr>
                                <td>
                                    <h3>Drug allergies</h3>
                                    <obsgroup groupingConceptId="90230">
                                        <obs conceptId="142" size="30" labelText="1"/>
                                        <br/>
                                        <obs conceptId="142" size="30" labelText="2"/>
                                        <br/>
                                        <obs conceptId="142" size="30" labelText="3"/>
                                    </obsgroup>
                                </td>
                                <td>
                                    <h3>Relevant medical conditions</h3>
                                    <obsgroup groupingConceptId="99104">
                                        <span class="lablex2">
                                        <obs id="134337" conceptId="1628" answerConceptId="134337" answerLabel="Mental health (depression, psychosis etc)" />
                                        <obs id="117399" conceptId="1628" answerConceptId="117399" answerLabel="Hypertension" />
                                        <obs id="119481" conceptId="1628" answerConceptId="119481" answerLabel="Diabetes mellitus" />
                                        <obs id="134337" conceptId="1628" answerConceptId="134337" answerLabel="Kaposi Sarcoma" />

                                        <obs id="5041" conceptId="1628" answerConceptId="5041" answerLabel="Lymphoma" />
                                        <obs id="99094" conceptId="1628" answerConceptId="99094" answerLabel="Kidney Disease" />
                                        <obs id="139069" conceptId="1628" answerConceptId="139069" answerLabel="Heart Failure" />
                                        <obs id="116023" conceptId="1628" answerConceptId="116023" answerLabel="Cervical Cancer" />
                                        <obs id="146221" conceptId="1628" answerConceptId="146221" answerLabel="Prostrate Cancer" />
                                        <obs id="116026" conceptId="1628" answerConceptId="116026" answerLabel="Breast Cancer" />
                                        <obs id="139069" conceptId="1628" answerConceptId="139069" answerLabel="Heart Failure" />

                                        <obs id="medical-conditions" conceptId="1628" answerConceptId="5622" answerLabel="Other">
                                            <controls>
                                                <when value="5622" thenDisplay="#otherMedicalConditions" />
                                            </controls>
                                        </obs>
                                        <span id="otherMedicalConditions">
                                             <obs conceptId="99111" size="30" labelText="Specify:"/>
                                        </span>
                                            </span>
                                    </obsgroup>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </section>
        </section>
<!--
        <section class="exposed-infant">
            <h3>Exposed Infant Follow-up</h3>
            <table border="0" style="background-color: #EEE">
                <thead>
                <tr>
                    <th rowspan="2">
                        Exposed Infant <br/>(Name#)
                    </th>
                    <th rowspan="2">
                        DOB
                    </th>
                    <th colspan="2">
                        Infant
                        feeding Status
                    </th>
                    <th rowspan="2">
                        CTX
                        started at 2 mths
                    </th>
                    <th rowspan="2">
                        Date
                        of 1st PCR/Result
                    </th>
                    <th rowspan="2">
                        Final
                        status
                    </th>
                    <th rowspan="2">
                        (If
                        Confirm + Unique ID)
                    </th>
                </tr>

                <tr>
                    <th>
                        &lt;6
                        mths
                    </th>
                    <th>
                        &gt;=6
                        mths
                    </th>
                </tr>
                </thead>

                <tr>
                    <obsgroup groupingConceptId="99078">
                        <td>
                            <obs conceptId="99077" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90261"/>
                        </td>
                        <td>
                            <obs conceptId="99607" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99608" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99076" answerConceptIds="90003,90004"
                                 answerLabels="Y,N"/>
                        </td>
                        <td>
                            <span class="ExposedInfantPCRResultEnableDisable1">
                                <obs conceptId="99606" size="5"/>
                            </span>
                            <span class="ExposedInfantPCRResultEnableDisableChildren1">
                                <obs conceptId="99153" answerConceptIds="90001,90167,90166" answerLabels="U,N,P"/>
                            </span>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisable1">
                            <obs conceptId="99121" answerConceptIds="90166,90167,99122,99112,90001"
                                 answerLabels="P,N,N/BF,Dead,U"/>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisableChildren1">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>

                <tr>
                    <obsgroup groupingConceptId="99078">
                        <td>
                            <obs conceptId="99077" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90261"/>
                        </td>
                        <td>
                            <obs conceptId="99607" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99608" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99076" answerConceptIds="90003,90004"
                                 answerLabels="Y,N"/>
                        </td>
                        <td>
                            <span class="ExposedInfantPCRResultEnableDisable2">
                                 <obs conceptId="99606" size="5"/>
                            </span>
                            <span class="ExposedInfantPCRResultEnableDisableChildren2">
                                <obs conceptId="99153" answerConceptIds="90001,90167,90166" answerLabels="U,N,P"/>
                            </span>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisable2">
                            <obs conceptId="99121" answerConceptIds="90166,90167,99122,99112,90001"
                                 answerLabels="P,N,N/BF,Dead,U"/>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisableChildren2">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>

                <tr>
                    <obsgroup groupingConceptId="99078">
                        <td>
                            <obs conceptId="99077" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90261"/>
                        </td>
                        <td>
                            <obs conceptId="99607" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99608" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99076" answerConceptIds="90003,90004"
                                 answerLabels="Y,N"/>
                        </td>
                        <td>
                            <span class="ExposedInfantPCRResultEnableDisable3">
                                <obs conceptId="99606" size="5"/>
                            </span>
                            <span class="ExposedInfantPCRResultEnableDisableChildren3">
                                <obs conceptId="99153" answerConceptIds="90001,90167,90166"
                                     answerLabels="U,N,P"/>
                            </span>


                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisable3">
                            <obs conceptId="99121" answerConceptIds="90166,90167,99122,99112,90001"
                                 answerLabels="P,N,N/BF,Dead,U"/>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisableChildren3">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>

                <tr>
                    <obsgroup groupingConceptId="99078">
                        <td>
                            <obs conceptId="99077" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90261"/>
                        </td>
                        <td>
                            <obs conceptId="99607" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99608" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99076" answerConceptIds="90003,90004"
                                 answerLabels="Y,N"/>
                        </td>
                        <td>
                            <span class="ExposedInfantPCRResultEnableDisable4">
                            <obs conceptId="99606" size="5"/>
                            </span>
                            <span class="ExposedInfantPCRResultEnableDisableChildren4">
                                <obs conceptId="99153" answerConceptIds="90001,90167,90166"
                                     answerLabels="U,N,P"/>
                            </span>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisable4">
                            <obs conceptId="99121" answerConceptIds="90166,90167,99122,99112,90001"
                                 answerLabels="P,N,N/BF,Dead,U"/>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisableChildren4">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>

                <tr>
                    <obsgroup groupingConceptId="99078">
                        <td>
                            <obs conceptId="99077" size="20"/>
                        </td>
                        <td>
                            <obs conceptId="90261"/>
                        </td>
                        <td>
                            <obs conceptId="99607" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99608" labelText="" answerConceptIds="5526,99089,6046"
                                 answerLabels="EBF,RF,MF"/>
                        </td>
                        <td>
                            <obs conceptId="99076" answerConceptIds="90003,90004"
                                 answerLabels="Y,N"/>
                        </td>
                        <td>
                            <span class="ExposedInfantPCRResultEnableDisable5">
                                <obs conceptId="99606" size="5"/>
                            </span>
                            <span class="ExposedInfantPCRResultEnableDisableChildren5">
                                <obs conceptId="99153" answerConceptIds="90001,90167,90166"
                                     answerLabels="U,N,P"/>
                            </span>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisable5">
                            <obs conceptId="99121" answerConceptIds="90166,90167,99122,99112,90001"
                                 answerLabels="P,N,N/BF,Dead,U"/>
                        </td>
                        <td class="ExposedInfantFinalStatusEnableDisableChildren5">
                            <obs conceptId="90263" size="20"/>
                        </td>
                    </obsgroup>
                </tr>
            </table>
        </section>
-->
        <section>
            <h3>ARV History</h3>
            <table border="0" id="art-history" style="background-color: #EEE">
                <tbody>
                <tr style="background: beige;">
                    <td colspan="4">
                        <obs id="priorARTTest" conceptId="99055" answerConceptIds="90004,90003" answerLabels="1-ARV naive,2-ARV experienced" labelText="Prior ART">
                           <controls>
                              <when value="90003" thenDisplay=".ARTHistoryTable" />
                           </controls>
                        </obs>
                    </td>
                </tr>
                <tr class="ARTHistoryTable">
                    <td>
                        <b>ARV Regimen</b>
                    </td>
                    <td>
                        <b>Start Date</b>
                    </td>
                    <td>
                        <b>Stop Date</b>
                    </td>
                    <td>
                        <b>Comments</b>
                    </td>
                </tr>
                <tr class="ARTHistoryTable">
                        <td>
                            <obs conceptId="99129"
                                 answerConceptIds="99015,99016,99005,99006,99039,99040,99041,99042,99007,99008,99044,99043,99282,99283,99046,99017,99018,99019,99045,99284,99285,99286,90002"
                                 answerLabels="d4T-3TC-NVP,d4T-3TC-EFV,AZT-3TC-NVP,AZT-3TC-EFV,TDF-3TC-NVP,TDF-3TC-EFV,TDF-FTC-NVP,TDF-FTC-EFV,ABC-ddI(250)-LPV/r,ABC-ddI(400)-LPV/r,TDF-3TC-LPV/r,TDF-FTC-LPV/r,ZDV-ddI(250)-LPV/r,ZDV-ddI(400)-LPV/r,ZDV-3TC-LPV/r,ABC-ddI-LPV/r,ABC-ddI-NFV,ABC-ddI-SQV/r,ZDV-ddI-LPV/r,ZDV-ABC-LPV/r,ABC-ddI-ATV/r,ZDV-3TC-ATV/r,Other"/>
                        </td>
                        <td>
                            <obs conceptId="99156" labelText=""/>
                        </td>
                        <td >
                            <obs conceptId="1163260"/>
                        </td>
                        <td>
                            <obs conceptId="1163259" />
                        </td>
                </tr>
<tr class="ARTHistoryTable">
                        <td>
                            <obs conceptId="99129"
                                 answerConceptIds="99015,99016,99005,99006,99039,99040,99041,99042,99007,99008,99044,99043,99282,99283,99046,99017,99018,99019,99045,99284,99285,99286,90002"
                                 answerLabels="d4T-3TC-NVP,d4T-3TC-EFV,AZT-3TC-NVP,AZT-3TC-EFV,TDF-3TC-NVP,TDF-3TC-EFV,TDF-FTC-NVP,TDF-FTC-EFV,ABC-ddI(250)-LPV/r,ABC-ddI(400)-LPV/r,TDF-3TC-LPV/r,TDF-FTC-LPV/r,ZDV-ddI(250)-LPV/r,ZDV-ddI(400)-LPV/r,ZDV-3TC-LPV/r,ABC-ddI-LPV/r,ABC-ddI-NFV,ABC-ddI-SQV/r,ZDV-ddI-LPV/r,ZDV-ABC-LPV/r,ABC-ddI-ATV/r,ZDV-3TC-ATV/r,Other"/>
                        </td>
                        <td>
                            <obs conceptId="99156" labelText=""/>
                        </td>
                        <td >
                            <obs conceptId="1163260"/>
                        </td>
                        <td>
                            <obs conceptId="1163259" />
                        </td>
                </tr>
<tr class="ARTHistoryTable">
                        <td>
                            <obs conceptId="99129"
                                 answerConceptIds="99015,99016,99005,99006,99039,99040,99041,99042,99007,99008,99044,99043,99282,99283,99046,99017,99018,99019,99045,99284,99285,99286,90002"
                                 answerLabels="d4T-3TC-NVP,d4T-3TC-EFV,AZT-3TC-NVP,AZT-3TC-EFV,TDF-3TC-NVP,TDF-3TC-EFV,TDF-FTC-NVP,TDF-FTC-EFV,ABC-ddI(250)-LPV/r,ABC-ddI(400)-LPV/r,TDF-3TC-LPV/r,TDF-FTC-LPV/r,ZDV-ddI(250)-LPV/r,ZDV-ddI(400)-LPV/r,ZDV-3TC-LPV/r,ABC-ddI-LPV/r,ABC-ddI-NFV,ABC-ddI-SQV/r,ZDV-ddI-LPV/r,ZDV-ABC-LPV/r,ABC-ddI-ATV/r,ZDV-3TC-ATV/r,Other"/>
                        </td>
                        <td>
                            <obs conceptId="99156" labelText=""/>
                        </td>
                        <td >
                            <obs conceptId="1163260"/>
                        </td>
                        <td>
                            <obs conceptId="1163259" />
                        </td>
                </tr>
                </tbody>
            </table>
        </section>
        <section>
            <h3>ART Care</h3>
            <table border="0" id="art-care" style="width:100%;">
                <tbody style="display:block;">
                <tr>
                    <th colspan="4" style="background-color: #377F9C;color: white;text-align: center;">Start ART Baseline</th>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="99162">
                        <td rowspan="3" style="width:20%;" class="ARTStartEnableDisable1">
                            <obs conceptId="99161" labelText="Date started:"/>
                        </td>
                        <td rowspan="3" class="ARTStartEnableDisableChild1" style="width:20%;">
                            <span class="ArtCareEnableDisable2">
                            <obs conceptId="99061"
                                 answerConceptIds="99005,99006,164979,99015,99016,99039,99040,164977,99041,99042,99884,99885,164978,163017,99143"
                                 answerLabels="AZT-3TC-NVP, AZT-3TC-EFV,AZT-3TC-DTG, D4T-3TC-NVP, D4T-3TC-EFV, TDF-3TC-NVP, TDF-3TC-EFV, TDF-3TC-DTG, TDF-FTC-NVP, TDF-FTC-EFV,ABC-3TC-NVP,ABC-3TC-EFV,ABC-3TC-DTG,ABC-3TC-LPV/r,OTHER"
                                 labelText="Initial Regimen"/>
                                </span>
                            <span class="ArtCareEnableDisableChild2">
                                <obs conceptId="99268" labelText="Others"/>
                            </span>
                        </td>
                    </obsgroup>
                    <td style="width:20%;" class="ARTStartEnableDisableChild1">
                        <obs conceptId="99069" labelText="Wt"/>
                    </td>
                    <td style="width:20%;" class="ARTStartEnableDisableChild1">
                        <obs conceptId="99070" answerConceptIds="1204,1205,1206,1207"
                             answerLabels="1,2,3,4" labelText="CI.Stage" style="dropdown"/>
                    </td>
                </tr>
                <tr>
                    <td class="ARTStartEnableDisableChild1">
                        <obs conceptId="99071" labelText="CD4"/>
                    </td>
                    <td class="ARTStartEnableDisableChild1">
                        <excludeIf velocityTest="$patient.gender =='M' ">
                            <obs conceptId="99072" answerConceptIds="90003,90004"
                                 answerLabels="Y, N" labelText="Preg"/>
                        </excludeIf>
                    </td>
                </tr>
                <tr>
                    <td class="ARTStartEnableDisableChild1">
                        <excludeIf velocityTest="$patient.gender =='M' ">
                            <obs conceptId="99603" answerConceptIds="90003,90004"
                                 answerLabels="Y, N" labelText="Lactating"/>
                        </excludeIf>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td colspan="4" style="background: #404040; color: white;">ART Transfer</td>
                </tr>
                <tr>
                    <td class="ARTStartEnableDisable2">
                        <obs conceptId="99160" labelText="Date transfered:"/>
                    </td>
                    <td class="ARTStartEnableDisableChild2">
                        <obs conceptId="90206" size="20" labelText="Transfered from:"/>
                    </td>
                    <td colspan="2" class="ARTStartEnableDisableChild2">
                        <span class="ArtCareEnableDisable1">
                        <small>
                            <obs labelText="ARVs" conceptId="99064"
                                 answerConceptIds="99015,99016,99005,99006,164979,99039,99040,99041,99042,164977,99007,99008,99044,99043,99282,99283,99046,99017,99018,99019,99045,99284,99285,99286,99046,164978,163017,90002"
                                 answerLabels="d4T-3TC-NVP,d4T-3TC-EFV,AZT-3TC-NVP,AZT-3TC-EFV,AZT-3TC-DTG,TDF-3TC-NVP,TDF-3TC-EFV,TDF-FTC-NVP,TDF-FTC-EFV,TDF-3TC-DTG,ABC-ddI(250)-LPV/r,ABC-ddI(400)-LPV/r,TDF-3TC-LPV/r,TDF-FTC-LPV/r,ZDV-ddI(250)-LPV/r,ZDV-ddI(400)-LPV/r,ZDV-3TC-LPV/r,ABC-ddI-LPV/r,ABC-ddI-NFV,ABC-ddI-SQV/r,ZDV-ddI-LPV/r,ZDV-ABC-LPV/r,ABC-ddI-ATV/r,AZT-3TC-ATV/r,AZT-3TC-LPV/r,ABC-3TC-DTG,ABC-3TC-LPV/r,Other"/>
                        </small>
                            </span>
                        <span class="ArtCareEnableDisableChild1">
                            <obs conceptId="99269" size="12" labelText="Other:"/>
                        </span>

                    </td>
                </tr>
                </tbody>
            </table>
        </section>
<section>
            <h3>Past Tuberculosis Treatment</h3>
            <table border="0" style="background-color: #EEE">
                <tbody>
                <tr style="background: beige;">
                    <td colspan="4">
                        <obs id="tuberculosisTest" conceptId="1163261" answerConceptIds="90003,90004" answerLabels="1-Yes,2-No" labelText="Treated for TB in the past:">
                           <controls>
                              <when value="90003" thenDisplay=".TBHistory" />
                           </controls>
                        </obs>
                    </td>
                </tr>
                <tr class="TBHistory">
                    <td>
                        <obs conceptId="90217" labelText="If yes specify year:" />
                        <obs conceptId="99031" labelText="TB No:" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <obs conceptId="1163262" answerConceptIds="90003,90004" answerLabels="1-Yes,2-No" labelText="Any one diagnosed with TB in household?" />
                    </td>
                </tr>
<tr style="border-top:2px solid #fff !important;">                    <td colspan="2">
                        <label><span class="required">*</span>Completed By:</label>
                        <encounterProvider role="Provider" style="autocomplete"/>
                         <span style="display: none;">
                        <encounterLocation default="629d78e9-93e5-43b0-ad8a-48313fd99117"
                                           order="629d78e9-93e5-43b0-ad8a-48313fd99117"/>
                        </span>
                    </td></tr>
                </tbody>
            </table>
        </section>
        <section>
            <h3>ART treatment interruptions - STOP or MISSED drug pick up</h3>
            <table>
                <tbody>
                    <tr>
                        <td>
                            <obsgroup groupingConceptId="99086">
                                <label>
                                    <b>Stop/Lost</b>
                                </label>

                                <div class="ARTTreatmentInterruptionEnableDisable1">
                                    <obs conceptId="99132" answerConceptIds="1363,99133"
                                         answerLabels="Stopped,Lost"/>
                                </div>

                                <div class="ARTTreatmentInterruptionEnableDisableChild1">
                                    <b>Date</b>
                                    <br/>
                                    <obs conceptId="99084"/>
                                    <br/>
                                </div>
                                <div class="ARTTreatmentInterruptionEnableDisableGrandChild1">
                                    <b>Why</b>
                                    <br/>

                                    <obs conceptId="1252" labelText=""
                                         answerConceptIds="90040,90046,90158,90050,90045,90051,90052,90066,99289,90002"
                                         answerLabels="1.Toxicity/side effects,2.Treatment Failure,3. Poor Adherence, 4.Illness/hospitalization, 5.Drug out of stock, 6.Patient lacks Finances, 7. Other patient decision, 8.Patient Rx interruption intpn, 9.Excluded HIV Infection, 10.Other,"/>
                                </div>
                                <div class="ARTTreatmentInterruptionEnableDisableChild1">
                                    <br/>
                                    <b>Date if Restart/Re-activated</b>
                                    <br/>
                                    <obs conceptId="99085"/>
                                </div>
                            </obsgroup>
                        </td>
                        <td>
                            <obsgroup groupingConceptId="99086">
                                <label>
                                    <b>Stop/Lost</b>
                                </label>
                                <span class="ARTTreatmentInterruptionEnableDisable2">
                                    <obs conceptId="99132" answerConceptIds="1363,99133"
                                         answerLabels="Stopped,  Lost"/>
                                </span>

                                <span class="ARTTreatmentInterruptionEnableDisableChild2">

                                    <b>Date</b>
                                    <br/>
                                    <obs conceptId="99084"/>
                                </span>
                                <br/>
                                <span class="ARTTreatmentInterruptionEnableDisableGrandChild2">
                                    <b>Why</b>
                                    <br/>

                                    <obs conceptId="1252" labelText=""
                                         answerConceptIds="90040,90046,90158,90050,90045,90051,90052,90066,99289,90002"
                                         answerLabels="1.Toxicity/side effects,2.Treatment Failure,3. Poor Adherence, 4.Illness/hospitalization, 5.Drug out of stock, 6.Patient lacks Finances, 7. Other patient decision, 8.Patient Rx interruption intpn, 9.Excluded HIV Infection, 10.Other,"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild2">
                                    <br/>
                                    <b>Date if Restart/Re-activated</b>
                                    <br/>
                                    <obs conceptId="99085"/>
                                </span>
                            </obsgroup>
                        </td>
                        <td>
                            <obsgroup groupingConceptId="99086">
                                <label>
                                    <b>Stop/Lost</b>
                                </label>
                                <span class="ARTTreatmentInterruptionEnableDisable3">
                                    <obs conceptId="99132" answerConceptIds="1363,99133"
                                         answerLabels="Stopped,  Lost"/>
                                </span>

                                <span class="ARTTreatmentInterruptionEnableDisableChild3">
                                    <b>Date</b>
                                    <br/>
                                    <obs conceptId="99084"/>
                                    <br/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableGrandChild3">
                                    <b>Why</b>
                                    <br/>
                                    <obs conceptId="1252" labelText=""
                                         answerConceptIds="90040,90046,90158,90050,90045,90051,90052,90066,99289,90002"
                                         answerLabels="1.Toxicity/side effects,2.Treatment Failure,3. Poor Adherence, 4.Illness/hospitalization, 5.Drug out of stock, 6.Patient lacks Finances, 7. Other patient decision, 8.Patient Rx interruption intpn, 9.Excluded HIV Infection, 10.Other,"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild3">
                                    <br/>
                                    <b>Date if Restart/Re-activated</b>
                                    <br/>
                                    <obs conceptId="99085"/>
                                </span>
                            </obsgroup>
                        </td>
                        <td>
                            <obsgroup groupingConceptId="99086">
                                <label>
                                    <b>Stop/Lost</b>
                                </label>
                                <span class="ARTTreatmentInterruptionEnableDisable4">
                                    <obs conceptId="99132" answerConceptIds="1363,99133"
                                         answerLabels=" Stopped,  Lost"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild4">
                                    <b>Date</b>
                                    <br/>
                                    <obs conceptId="99084"/>
                                    <br/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableGrandChild4">
                                    <b>Why</b>
                                    <br/>
                                    <obs conceptId="1252" labelText=""
                                         answerConceptIds="90040,90046,90158,90050,90045,90051,90052,90066,99289,90002"
                                         answerLabels="1.Toxicity/side effects,2.Treatment Failure,3. Poor Adherence, 4.Illness/hospitalization, 5.Drug out of stock, 6.Patient lacks Finances, 7. Other patient decision, 8.Patient Rx interruption intpn, 9.Excluded HIV Infection, 10.Other,"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild4">
                                    <br/>
                                    <b>Date if Restart/Re-activated</b>
                                    <br/>
                                    <obs conceptId="99085"/>
                                </span>
                            </obsgroup>
                        </td>
                        <td>
                            <obsgroup groupingConceptId="99086">
                                <label>
                                    <b>Stop/Lost</b>
                                </label>
                                <span class="ARTTreatmentInterruptionEnableDisable5">
                                    <obs conceptId="99132" answerConceptIds="1363,99133"
                                         answerLabels=" Stopped,  Lost"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild5">
                                    <b>Date</b>
                                    <br/>
                                    <obs conceptId="99084"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableGrandChildChild5">
                                    <br/>
                                    <b>Why</b>
                                    <br/>
                                    <obs conceptId="1252" labelText=""
                                         answerConceptIds="90040,90046,90158,90050,90045,90051,90052,90066,99289,90002"
                                         answerLabels="1.Toxicity/side effects,2.Treatment Failure,3. Poor Adherence, 4.Illness/hospitalization, 5.Drug out of stock, 6.Patient lacks Finances, 7. Other patient decision, 8.Patient Rx interruption intpn, 9.Excluded HIV Infection, 10.Other,"/>
                                    <br/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild5">
                                    <b>Date if Restart/Re-activated</b>
                                    <br/>
                                    <obs conceptId="99085"/>
                                </span>
                            </obsgroup>
                        </td>
                        <td>
                            <obsgroup groupingConceptId="99086">
                                <label>
                                    <b>Stop/Lost</b>
                                </label>
                                <span class="ARTTreatmentInterruptionEnableDisable6">
                                    <obs conceptId="99132" answerConceptIds="1363,99133"
                                         answerLabels="Stopped,  Lost"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild6">
                                    <b>Date</b>
                                    <br/>
                                    <obs conceptId="99084"/>
                                    <br/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisablGrandeChild6">
                                    <b>Why</b>
                                    <br/>
                                    <obs conceptId="1252" labelText=""
                                         answerConceptIds="90040,90046,90158,90050,90045,90051,90052,90066,99289,90002"
                                         answerLabels="1.Toxicity/side effects,2.Treatment Failure,3. Poor Adherence, 4.Illness/hospitalization, 5.Drug out of stock, 6.Patient lacks Finances, 7. Other patient decision, 8.Patient Rx interruption intpn, 9.Excluded HIV Infection, 10.Other,"/>
                                </span>
                                <span class="ARTTreatmentInterruptionEnableDisableChild6">
                                    <br/>
                                    <b>Date if Restart/Re-activated</b>
                                    <br/>
                                    <obs conceptId="99085"/>
                                </span>
                            </obsgroup>
                        </td>

                    </tr>
                </tbody>
            </table>
        </section>
        <section>
            <table border="0" id="art-care"
                   style="padding: 10px; margin: 5px; border: solid 1px #D2D2D2;">
                <tbody>
                    <tr>
                        <td style="color: #404040; background-color: #F3F3F3">Status</td>
                        <td style="color: #404040; background-color: #F3F3F3">Date</td>
                        <td style="color: #404040; background-color: #F3F3F3"></td>
                    </tr>
                    <tr class="enableDisable">
                        <obsgroup groupingConceptId="99166">
                            <td id="trigger">
                                <obs id="90306" conceptId="90306" answerConceptId="90003"
                                     answerLabel="Transfer out:"/>
                            </td>
                            <td id="disabled">
                                <obs id="99165" conceptId="99165"/>
                            </td>
                            <td id="disabled">
                                <obs conceptId="90211" labelText="Where"/>
                            </td>
                        </obsgroup>
                    </tr>
                    <tr class="enableDisable">
                        <obsgroup groupingConceptId="99167">
                            <td id="trigger">
                                <obs id="5240" conceptId="5240" answerConceptId="90003"
                                     answerLabel="Lost to follow-up (drop):"/>
                            </td>
                            <td id="disabled">
                                <obs id="90209" conceptId="90209"/>
                            </td>
                            <td></td>
                        </obsgroup>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>
    <section>
        <submit/>
    </section>
    <!-- End of HTML Form -->
    <ifMode mode="EDIT" include="false">
        <lookup complexExpression="
            #set( $encounter = 0 )
            #set( $encounter = $fn.latestEncounter('8d5b27bc-c2cc-11de-8d13-0010c6dffd0f'))
            #if( $encounter != 0 )
                &lt;script type=&quot;text/javascript&quot;>
                        if (window.location.href.indexOf('/module/htmlformentry/htmlForm.form') == -1) {
                            window.location.href = window.location.protocol + &quot;//&quot; + window.location.host + &quot;/&quot;+ OPENMRS_CONTEXT_PATH + &quot;/htmlformentryui/htmlform/editHtmlFormWithStandardUi.page?patientId=$patient.patientId&amp;visitId=$encounter.visit.visitId&amp;formUuid=52653a60-8300-4c13-be4d-4b746da06fee&amp;encounterId=$encounter.encounterId&amp;returnUrl=%2F&quot; + OPENMRS_CONTEXT_PATH + &quot;%2Fcoreapps%2Fclinicianfacing%2Fpatient.page%3FpatientId%3D$patient.patientId&quot;;
                        }
                &lt;/script>
            #end"/>
    </ifMode>
</htmlform>
